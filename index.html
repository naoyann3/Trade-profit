<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KTCãƒˆãƒ¬ãƒ¼ãƒ‰åæ”¯è©¦ç®—è¡¨</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
<style>
    body { font-family: 'Noto Sans JP', sans-serif; background-color: #f8fafc; }
    .mono { font-family: 'Roboto Mono', monospace; }
    input[type="number"]::-webkit-inner-spin-button, 
    input[type="number"]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
</style>
</head>
<body class="p-4 md:p-8 text-slate-700">

<div class="max-w-3xl mx-auto bg-white shadow-lg rounded-xl overflow-hidden border border-slate-200">
    
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <div class="bg-slate-800 text-white p-5">
        <h2 class="text-xl font-bold flex items-center gap-2">
            ğŸ“Š çŸ­æœŸãƒˆãƒ¬ãƒ¼ãƒ‰åæ”¯è©¦ç®—è¡¨
        </h2>
        <p class="text-xs text-slate-400 mt-1">10åˆ†å‰²ãƒ”ãƒ©ãƒŸãƒƒãƒ†ã‚£ãƒ³ã‚°æ–¹å¼å¯¾å¿œ</p>
    </div>

    <div class="p-6 space-y-8">
        
        <!-- åŸºæœ¬è¨­å®šã‚¨ãƒªã‚¢ -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div>
                <label class="block text-xs font-bold text-slate-500 uppercase mb-1">é‹ç”¨è³‡é‡‘ (å††)</label>
                <input type="text" id="capital" value="1,000,000" oninput="formatCurrencyInput(this)" class="mono w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none text-right font-bold text-lg">
            </div>
            <div>
                <label class="block text-xs font-bold text-slate-500 uppercase mb-1">1å›ã®åˆ©å¹…ç›®æ¨™ (%)</label>
                <input type="number" id="profitRate" value="3.0" step="0.1" class="mono w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none text-right font-bold text-lg">
            </div>
            <div>
                <label class="block text-xs font-bold text-slate-500 uppercase mb-1">æœˆé¡çµŒè²» (ä¼šè²»ç­‰)</label>
                <input type="text" id="cost" value="20,000" oninput="formatCurrencyInput(this)" class="mono w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none text-right font-bold text-lg">
            </div>
        </div>

        <hr class="border-slate-100">

        <!-- ãƒ”ãƒ©ãƒŸãƒƒãƒ†ã‚£ãƒ³ã‚°å…¥åŠ›ã‚¨ãƒªã‚¢ -->
        <div>
            <h3 class="font-bold text-sm text-slate-700 mb-3 flex justify-between items-end">
                <span>æœˆé–“ãƒˆãƒ¬ãƒ¼ãƒ‰å®Ÿç¸¾å…¥åŠ›</span>
                <span class="text-xs text-slate-400 font-normal">â€»ä¸‹ã«è¡Œãã»ã©æ·±ã„ä½ç½®ã§ã®ç´„å®š</span>
            </h3>
            
            <div class="overflow-x-auto">
                <table class="w-full text-sm text-left">
                    <thead class="text-xs text-slate-500 uppercase bg-slate-50 border-b">
                        <tr>
                            <th class="p-2 w-16">ç‰No.</th>
                            <th class="p-2 w-20">é…åˆ†ç‡</th>
                            <th class="p-2">æŠ•è³‡é‡‘é¡</th>
                            <th class="p-2">1å‹ã®åˆ©ç›Š</th>
                            <th class="p-2 w-24">æœˆé–“å‹æ•°</th>
                        </tr>
                    </thead>
                    <tbody id="table-body">
                        <!-- JSã§è‡ªå‹•ç”Ÿæˆ -->
                    </tbody>
                </table>
            </div>
            <p class="text-xs text-right text-slate-400 mt-2">é…åˆ†ç‡åˆè¨ˆ: <span id="total-allocation">0</span>%</p>
        </div>

        <!-- åŠ´åƒæ™‚é–“è¨­å®š -->
        <div class="flex items-center justify-end gap-4 bg-slate-50 p-3 rounded">
            <label class="text-xs font-bold text-slate-500">æƒ³å®šåŠ´åƒæ™‚é–“ (æœˆ/h)</label>
            <div class="flex items-center gap-2">
                <input type="number" id="hours" value="60" class="mono w-20 p-1 border border-slate-300 rounded text-right">
                <span class="text-xs text-slate-400">æ™‚é–“</span>
            </div>
        </div>

        <!-- çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ -->
        <div class="bg-slate-100 rounded-lg p-5 border border-slate-200">
            <div class="grid grid-cols-2 gap-4 mb-4">
                <div>
                    <p class="text-xs text-slate-500">æœˆé–“ ç²—åˆ©ç›Š</p>
                    <p class="mono text-xl font-bold text-blue-600" id="gross-profit">0</p>
                </div>
                <div>
                    <p class="text-xs text-slate-500">çµŒè²» (ä¼šè²»)</p>
                    <p class="mono text-xl font-bold text-red-500" id="display-cost">0</p>
                </div>
            </div>
            
            <div class="border-t border-slate-300 pt-4">
                <div class="flex justify-between items-end mb-1">
                    <p class="font-bold text-slate-700">æœ€çµ‚æç›Š (Net Profit)</p>
                    <p class="mono text-3xl font-bold" id="net-profit">0</p>
                </div>
                <div class="flex justify-end items-center gap-2">
                    <span class="text-xs text-slate-400">åŠ´åƒæ™‚çµ¦æ›ç®—:</span>
                    <span class="mono font-bold text-slate-600" id="hourly-wage">0</span>
                </div>
            </div>
        </div>

    </div>
</div>

<script>
    // ã‚¿ã‚±ã•ã‚“å¼ãƒ”ãƒ©ãƒŸãƒƒãƒ†ã‚£ãƒ³ã‚°é…åˆ†
    const allocations = [2, 3, 5, 7, 8, 10, 12, 15, 18, 20];
    
    // åˆæœŸå€¤ã¨ã—ã¦ã®æœˆé–“å‹æ•°ï¼ˆä¾‹ï¼šæµ…ã„ç‰ã¯å¤šãã€æ·±ã„ç‰ã¯å°‘ãªãï¼‰
    const defaultWins = [3, 2, 1, 1, 0, 0, 0, 0, 0, 0];

    function init() {
        const tbody = document.getElementById('table-body');
        let html = '';
        
        allocations.forEach((rate, index) => {
            html += `
                <tr class="border-b hover:bg-slate-50 transition">
                    <td class="p-2 font-mono text-slate-400">#${index + 1}</td>
                    <td class="p-2 font-mono text-slate-500">${rate}%</td>
                    <td class="p-2 font-mono font-bold" id="amount-${index}">0</td>
                    <td class="p-2 font-mono text-blue-600" id="win-profit-${index}">0</td>
                    <td class="p-2">
                        <input type="number" min="0" value="${defaultWins[index]}" 
                            class="mono w-full p-1 border border-slate-300 rounded text-center focus:bg-blue-50 outline-none win-input"
                            oninput="calculate()">
                    </td>
                </tr>
            `;
        });
        tbody.innerHTML = html;
        
        // åˆè¨ˆé…åˆ†ç‡è¡¨ç¤º
        document.getElementById('total-allocation').textContent = allocations.reduce((a, b) => a + b, 0);

        calculate();
    }

    // æ•°å€¤ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰
    function fmt(num) {
        return num.toLocaleString() + ' å††';
    }

    // å…¥åŠ›æ¬„ã®ã‚«ãƒ³ãƒå‡¦ç†
    function formatCurrencyInput(input) {
        let val = input.value.replace(/[^0-9]/g, '');
        if (val === '') val = '0';
        input.value = Number(val).toLocaleString();
        calculate();
    }

    function getNum(id) {
        const val = document.getElementById(id).value.replace(/[^0-9.]/g, '');
        return Number(val);
    }

    function calculate() {
        const capital = getNum('capital');
        const profitRate = getNum('profitRate') / 100;
        const cost = getNum('cost');
        const hours = getNum('hours');

        let totalGross = 0;
        const winInputs = document.querySelectorAll('.win-input');

        allocations.forEach((rate, index) => {
            // å„ç‰ã®æŠ•è³‡é¡
            const investAmount = capital * (rate / 100);
            document.getElementById(`amount-${index}`).textContent = Math.floor(investAmount).toLocaleString();

            // 1å‹ã‚ãŸã‚Šã®åˆ©ç›Š
            const oneWinProfit = investAmount * profitRate;
            document.getElementById(`win-profit-${index}`).textContent = '+' + Math.floor(oneWinProfit).toLocaleString();

            // æœˆé–“å‹æ•°ã«åŸºã¥ãåˆ©ç›Š
            const wins = Number(winInputs[index].value);
            totalGross += oneWinProfit * wins;
        });

        // çµæœè¡¨ç¤º
        const netProfit = totalGross - cost;
        const hourlyWage = hours > 0 ? netProfit / hours : 0;

        document.getElementById('gross-profit').textContent = '+' + fmt(Math.floor(totalGross));
        document.getElementById('display-cost').textContent = 'â–²' + fmt(cost);
        
        const netEl = document.getElementById('net-profit');
        netEl.textContent = (netProfit > 0 ? '+' : '') + fmt(Math.floor(netProfit));
        netEl.className = `mono text-3xl font-bold ${netProfit > 0 ? 'text-emerald-600' : 'text-rose-600'}`;

        document.getElementById('hourly-wage').textContent = fmt(Math.floor(hourlyWage));
    }

    // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
    document.getElementById('profitRate').addEventListener('input', calculate);
    document.getElementById('hours').addEventListener('input', calculate);

    // åˆæœŸåŒ–
    window.onload = init;
</script>

</body>
</html>
